!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}([function(e,t){const r={fillArray(e){let t=new Array(4);return t.fill(e),t},makeMartix(e=0){return Array.from({length:4},()=>this.fillArray(e))},getPosition:(e,t)=>({left:4+24*t,top:4+24*e}),getBcolor(e){switch(e){case 2:return"#eee4da";case 4:return"#ede0c8";case 8:return"#f2b179";case 16:return"#f59463";case 32:return"#f67c5f";case 64:return"#f65e3b";case 128:return"#edcf72";case 256:return"#edcc61";case 512:return"#9c0";case 1024:return"#33b5e5";case 2048:return"#09c";case 4096:return"#a6c"}return"black"},getNumColor:e=>e>4?"#776e65":"white"},o={canMoveLeft(e){for(let t=0;t<e.length;t++)for(let r=1;r<e[t].length;r++)if(0==e[t][r-1]||e[t][r]==e[t][r-1])return!0;return!1},canMoveRight(e){for(let t=0;t<e.length;t++)for(let r=e[t].length-2;r>-1;r--)if(0==e[t][r+1]||e[t][r]==e[t][r+1])return!0;return!1},canMoveUp(e){for(let t=0;t<e.length;t++)for(let r=1;r<e.length;r++)if(0==e[r-1][t]||e[r][t]==e[r-1][t])return!0;return!1},canMoveDown(e){for(let t=0;t<e.length;t++)for(let r=e.length-2;r>-1;r--)if(0==e[r+1][t]||e[r][t]==e[r+1][t])return!0;return!1},noRowBlock(e,t,r,o){for(let n=r+1;n<t;n++)if(0!=o[e][n])return!1;return!0},noColBlock(e,t,r,o){for(let n=r+1;n<e;n++)if(0!=o[n][t])return!1;return!0},noMove(e){return!(this.canMoveLeft(e)||this.canMoveRight(e)||this.canMoveDown(e)||this.canMoveUp(e))}},n={showAnimated(e,t,o){let n=$(".matrix-wrapper").width(),i=$(`#num-cell-${e}-${t}`);i.css({color:`${r.getNumColor(o)}`,"background-color":`${r.getBcolor(o)}`}),i.text(o),i.animate({width:`${.2*n}px`,height:`${.2*n}px`,top:`${r.getPosition(e,t).top}%`,left:`${r.getPosition(e,t).left}%`},50)},moveAnimated(e,t,o,n){$(`#num-cell-${e}-${t}`).animate({top:`${r.getPosition(o,n).top}%`,left:`${r.getPosition(o,n).left}%`},150)}};e.exports=class{static get tool(){return r}static get canMove(){return o}static get animate(){return n}}},function(e,t,r){const o=r(0),n={checkNumCell(e){for(let t=0;t<e.length;t++)for(let r=0;r<e[t].length;r++)if(0==e[t][r])return!1;return!0},randomOneNum(e){if(this.checkNumCell(e))return e;let t=parseInt(Math.floor(4*Math.random())),r=parseInt(Math.floor(4*Math.random())),n=0;for(;n<50&&0!=e[t][r];)t=parseInt(Math.floor(4*Math.random())),r=parseInt(Math.floor(4*Math.random())),n++;if(50==n)for(let o=0;o<e.lenght;o++)for(let n=0;n<e[o].length;n++)0==e[o][n]&&(t=o,r=n);let i=Math.random()<.5?2:4;return e[t][r]=i,o.animate.showAnimated(t,r,i),e},generateNumcell(e){return this.randomOneNum(this.randomOneNum(e))}};e.exports=class{static get Num(){return n}}},function(e,t,r){
/*!
 * storejs v1.0.16
 * Local storage localstorage package provides a simple API
 * 
 * Copyright (c) 2017 kenny wang <wowohoo@qq.com>
 * https://github.com/jaywcjlove/store.js
 * 
 * Licensed under the MIT license.
 */
e.exports=function(){if(window.localStorage){var e,t=window.localStorage,r=function(){};for(var o in t=function(e){var t="_Is_Incognit";try{e.setItem(t,"yes")}catch(t){if("QuotaExceededError"===t.name){var r=function(){};e.__proto__={setItem:r,getItem:r,removeItem:r,clear:r}}}finally{"yes"===e.getItem(t)&&e.removeItem(t)}return e}(t),l.prototype={set:function(e,o){if(r("set",e,o),e&&!n(e))t.setItem(e,function(e){return void 0===e||"function"==typeof e?e+"":JSON.stringify(e)}(o));else if(e&&n(e)&&!o)for(var i in e)this.set(i,e[i]);return this},get:function(e){if(!e){var r={};return this.forEach(function(e,t){r[e]=t}),r}return"?"===e.charAt(0)?this.has(e.substr(1)):function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}}(t.getItem(e))},clear:function(){return this.forEach(function(e,t){r("clear",e,t)}),t.clear(),this},remove:function(e){var o=this.get(e);return t.removeItem(e),r("remove",e,o),o},has:function(e){return{}.hasOwnProperty.call(this.get(),e)},keys:function(){var e=[];return this.forEach(function(t,r){e.push(t)}),e},size:function(){return this.keys().length},forEach:function(e){for(var r=0;r<t.length;r++){var o=t.key(r);if(!1===e(o,this.get(o)))break}return this},search:function(e){for(var t=this.keys(),r={},o=0;o<t.length;o++)t[o].indexOf(e)>-1&&(r[t[o]]=this.get(t[o]));return r},onStorage:function(e){return e&&i(e)&&(r=e),this}},e=function(t,r){var o=arguments,a=l(),c=null;if(0===o.length)return a.get();if(1===o.length){if("string"==typeof t)return a.get(t);if(n(t))return a.set(t)}if(2===o.length&&"string"==typeof t){if(!r)return a.remove(t);if(r&&"string"==typeof r)return a.set(t,r);if(r&&i(r))return c=null,(c=r(t,a.get(t)))?e.set(t,c):e}if(2===o.length&&t instanceof Array&&i(r)){for(var u=0;u<t.length;u++)c=r(t[u],a.get(t[u])),e.set(t[u],c);return e}},l.prototype)e[o]=l.prototype[o];return e}function n(e){return"object"==typeof e&&"[object object]"===Object.prototype.toString.call(e).toLowerCase()&&!e.length}function i(e){return"[object Function]"==={}.toString.call(e)}function l(){if(!(this instanceof l))return new l}}()},function(e,t,r){const o=r(0),n=r(1),i={moveLeft(e){let t=$("#socre"),r=+t.text();if(!o.canMove.canMoveLeft(e))return e;for(let t=0;t<e.length;t++)for(let n=1;n<e[t].length;n++)if(0!=e[t][n])for(let i=0;i<n;i++)0==e[t][i]&&o.canMove.noRowBlock(t,n,i,e)?(o.animate.moveAnimated(t,n,t,i),e[t][i]=e[t][n],e[t][n]=0):e[t][n]==e[t][i]&&o.canMove.noRowBlock(t,n,i,e)&&(o.animate.moveAnimated(t,n,t,i),e[t][i]+=e[t][n],r+=e[t][i],e[t][n]=0);return t.text(r),e},moveRight(e){let t=$("#socre"),r=+t.text();if(!o.canMove.canMoveRight(e))return e;for(let t=0;t<e.length;t++)for(let n=e[t].length-2;n>-1;n--)if(0!=e[t][n])for(let i=e[t].length-1;i>n;i--)0==e[t][i]&&o.canMove.noRowBlock(t,i,n,e)?(o.animate.moveAnimated(t,n,t,i),e[t][i]=e[t][n],e[t][n]=0):e[t][n]==e[t][i]&&o.canMove.noRowBlock(t,i,n,e)&&(o.animate.moveAnimated(t,n,t,i),e[t][i]+=e[t][n],r+=e[t][i],e[t][n]=0);return t.text(r),e},moveUp(e){let t=$("#socre"),r=+t.text();if(!o.canMove.canMoveUp(e))return e;for(let t=0;t<e.length;t++)for(let n=1;n<e.length;n++)if(0!=e[n][t])for(let i=0;i<n;i++)0==e[i][t]&&o.canMove.noColBlock(n,t,i,e)?(o.animate.moveAnimated(n,t,i,t),e[i][t]=e[n][t],e[n][t]=0):e[n][t]==e[i][t]&&o.canMove.noColBlock(n,t,i,e)&&(o.animate.moveAnimated(n,t,i,t),e[i][t]+=e[n][t],r+=e[i][t],e[n][t]=0);return t.text(r),e},moveDown(e){let t=$("#socre"),r=+t.text();if(!o.canMove.canMoveDown(e))return e;for(let t=0;t<e.length;t++)for(let n=e.length-2;n>-1;n--)if(0!=e[n][t])for(let i=e.length-1;i>n;i--)0==e[i][t]&&o.canMove.noColBlock(i,t,n,e)?(o.animate.moveAnimated(n,t,i,t),e[i][t]=e[n][t],e[n][t]=0):e[n][t]==e[i][t]&&o.canMove.noColBlock(i,t,n,e)&&(o.animate.moveAnimated(n,t,i,t),e[i][t]+=e[n][t],r+=e[i][t],e[n][t]=0);return t.text(r),e},isOver(e){n.Num.checkNumCell(e)&&o.canMove.noMove(e)&&alert("GameOver")}};e.exports=class{static get move(){return i}}},function(e,t,r){const o=r(0);e.exports=class{constructor(){this.$wrapper=$(".matrix-wrapper"),this.wrapperWidth=this.$wrapper.width(),this.$wrapper.css("height",`${this.wrapperWidth}px`)}initUI(e){let t="";for(let e=0;e<4;e++)for(let r=0;r<4;r++)t+=`<div class="matrix-cell" style="left:${o.tool.getPosition(e,r).left}%;top:${o.tool.getPosition(e,r).top}%;height:${.2*this.wrapperWidth}px"></div>`;this.$wrapper.append(t),this.getNumCell(e)}getNumCell(e){$(".num-cell").remove();let t="";for(let r=0;r<e.length;r++)for(let n=0;n<e[r].length;n++)0==e[r][n]?t+=`<div class="num-cell" id="num-cell-${r}-${n}"; style="width:0px;height:0px;left:${o.tool.getPosition(r,n).left+10}%;top:${o.tool.getPosition(r,n).top+10}%;"></div>`:t+=`<div class="num-cell" id="num-cell-${r}-${n}"; style="color:${o.tool.getNumColor(e[r][n])};background-color:${o.tool.getBcolor(e[r][n])};width:${.2*this.wrapperWidth}px;height:${.2*this.wrapperWidth}px;left:${o.tool.getPosition(r,n).left}%;top:${o.tool.getPosition(r,n).top}%;">${e[r][n]}</div>`;this.$wrapper.append(t)}}},function(e,t,r){"use strict";r.r(t);r(10);const o=r(0),n=r(4),i=r(1),l=r(3),a=r(2);window.onload=(()=>{let e=[],t=0,r=new n;a.get("numArray")?(e=a.get("numArray"),t=a.get("sorce"),a.remove("numArray","sorce"),r.initUI(e),$("#sorce").text(t)):(e=o.tool.makeMartix(0),r.initUI(e),e=i.Num.generateNumcell(e)),$("#start").on("click",()=>{e=o.tool.makeMartix(0),r.initUI(e),e=i.Num.generateNumcell(e)}),$("#save").on("click",()=>{let t=$("#sorce").text();a.set("numArray",e),a.set("sorce",t)}),$(document).keydown(t=>{switch(t.keyCode){case 37:l.move.moveLeft(e),setTimeout(()=>{r.getNumCell(e)},150),i.Num.generateNumcell(e),setTimeout(()=>{l.move.isOver(e)},180);break;case 38:e=l.move.moveUp(e),setTimeout(()=>{r.getNumCell(e)},150),i.Num.generateNumcell(e),setTimeout(()=>{l.move.isOver(e)},180);break;case 39:e=l.move.moveRight(e),setTimeout(()=>{r.getNumCell(e)},150),i.Num.generateNumcell(e),setTimeout(()=>{l.move.isOver(e)},180);break;case 40:e=l.move.moveDown(e),setTimeout(()=>{r.getNumCell(e)},150),i.Num.generateNumcell(e),setTimeout(()=>{l.move.isOver(e)},180)}});let c=0,u=0,s=0,m=0,f=$(window).width(),h=$("#matrix-wrapper")[0];h.addEventListener("touchstart",e=>{e.preventDefault(),c=e.touches[0].pageX,u=e.touches[0].pageY},{passive:!1}),h.addEventListener("touchend",t=>{t.preventDefault(),s=t.changedTouches[0].pageX,m=t.changedTouches[0].pageY;let o=s-c,n=m-u;Math.abs(o)<.3*f&&Math.abs(n)<.3*f||(Math.abs(o)>=Math.abs(n)?o>0?(e=l.move.moveRight(e),setTimeout(()=>{r.getNumCell(e)},150),i.Num.generateNumcell(e),setTimeout(()=>{l.move.isOver(e)},180)):(e=l.move.moveLeft(e),setTimeout(()=>{r.getNumCell(e)},150),i.Num.generateNumcell(e),setTimeout(()=>{l.move.isOver(e)},180)):n>0?(e=l.move.moveDown(e),setTimeout(()=>{r.getNumCell(e)},150),i.Num.generateNumcell(e),setTimeout(()=>{l.move.isOver(e)},180)):(e=l.move.moveUp(e),setTimeout(()=>{r.getNumCell(e)},150),i.Num.generateNumcell(e),setTimeout(()=>{l.move.isOver(e)},180)))},{passive:!1})})},,,,,function(e,t){}]);