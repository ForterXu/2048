!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=4)}([function(e,t){const o={fillArray(e){let t=new Array(4);return t.fill(e),t},makeMartix(e=0){return Array.from({length:4},()=>this.fillArray(e))},getPosition:(e,t)=>({left:4+24*t,top:4+24*e}),getBcolor(e){switch(e){case 2:return"#eee4da";case 4:return"#ede0c8";case 8:return"#f2b179";case 16:return"#f59463";case 32:return"#f67c5f";case 64:return"#f65e3b";case 128:return"#edcf72";case 256:return"#edcc61";case 512:return"#9c0";case 1024:return"#33b5e5";case 2048:return"#09c";case 4096:return"#a6c"}return"black"},getNumColor:e=>e>4?"#776e65":"white"},n={canMoveLeft(e){for(let t=0;t<e.length;t++)for(let o=1;o<e[t].length;o++)if(0==e[t][o-1]||e[t][o]==e[t][o-1])return!0;return!1},canMoveRight(e){for(let t=0;t<e.length;t++)for(let o=0;o<e[t].length-1;o++)if(0==e[t][o-1]||e[t][o]==e[t][o-1])return!0;return!1},canMoveUp(e){for(let t=1;t<e.length;t++)for(let o=0;o<e[t].length;o++)if(0==e[t][o-1]||e[t][o]==e[t][o-1])return!0;return!1},canMoveDown(e){for(let t=0;t<e.length-1;t++)for(let o=0;o<e[t].length;o++)if(0==e[t][o-1]||e[t][o]==e[t][o-1])return!0;return!1},noRowBlock(e,t,o,n){for(let r=o+1;r<t;r++)if(0!=n[e][r])return!1;return!0},noColBlock(e,t,o,n){for(let r=o+1;r<e;r++)if(0!=n[r][t])return!1;return!0}},r={showAnimated(e,t,n){let r=$(".matrix-wrapper").width(),l=$(`#num-cell-${e}-${t}`);l.css({color:`${o.getNumColor(n)}`,"background-color":`${o.getBcolor(n)}`}),l.text(n),l.animate({width:`${.2*r}px`,height:`${.2*r}px`,top:`${o.getPosition(e,t).top}%`,left:`${o.getPosition(e,t).left}%`},80)},moveAnimated(e,t,n,r){$(`#num-cell-${e}-${t}`).animate({top:`${o.getPosition(n,r).top}%`,left:`${o.getPosition(n,r).left}%`},200)}};e.exports=class{static get tool(){return o}static get canMove(){return n}static get animate(){return r}}},function(e,t,o){const n=o(0),r={moveLeft(e){if(!n.canMove.canMoveLeft(e))return!1;for(let t=0;t<e.length;t++)for(let o=1;o<e[t].length;o++)if(0!=e[t][o])for(let r=0;r<o;r++)0==e[t][r]&&n.canMove.noRowBlock(t,o,r,e)?(n.animate.moveAnimated(t,o,t,r),e[t][r]=e[t][o],e[t][o]=0):e[t][o]==e[t][r]&&n.canMove.noRowBlock(t,o,r,e)&&(n.animate.moveAnimated(t,o,t,r),e[t][r]+=e[t][o],e[t][o]=0);return e},moveRight(e){if(!n.canMove.canMoveRight(e))return!1;for(let t=0;t<e.length;t++)for(let o=e[t].length-2;o>-1;o--)if(0!=e[t][o])for(let r=e[t].length-1;r>o;r--)0==e[t][r]&&n.canMove.noRowBlock(t,r,o,e)?(n.animate.moveAnimated(t,o,t,r),e[t][r]=e[t][o],e[t][o]=0):e[t][o]==e[t][r]&&n.canMove.noRowBlock(t,r,o,e)&&(n.animate.moveAnimated(t,o,t,r),e[t][r]+=e[t][o],e[t][o]=0);return e},moveUp(e){if(!n.canMove.canMoveUp(e))return!1;for(let t=0;t<e.length;t++)for(let o=1;o<e.length;o++)if(0!=e[o][t])for(let r=0;r<o;r++)0==e[r][t]&&n.canMove.noColBlock(o,t,r,e)?(n.animate.moveAnimated(o,t,r,t),e[r][t]=e[o][t],e[o][t]=0):e[o][t]==e[r][t]&&n.canMove.noColBlock(o,t,r,e)&&(n.animate.moveAnimated(o,t,r,t),e[r][t]+=e[o][t],e[o][t]=0);return e},moveDown(e){if(!n.canMove.canMoveDown(e))return!1;for(let t=0;t<e.length;t++)for(let o=e.length-2;o>-1;o--)if(0!=e[o][t])for(let r=e.length-1;r>o;r--)0==e[r][t]&&n.canMove.noColBlock(r,t,o,e)?(n.animate.moveAnimated(o,t,r,t),e[r][t]=e[o][t],e[o][t]=0):e[o][t]==e[r][t]&&n.canMove.noColBlock(r,t,o,e)&&(n.animate.moveAnimated(o,t,r,t),e[r][t]+=e[o][t],e[o][t]=0);return e}};e.exports=class{static get move(){return r}}},function(e,t,o){const n=o(0),r={checkNumCell(e){for(let t=0;t<e.length;t++)for(let o=0;o<e[t].length;o++)if(0==e[t][o])return!1;return!0},randomOneNum(e){if(this.checkNumCell(e))return e;let t=parseInt(Math.floor(4*Math.random())),o=parseInt(Math.floor(4*Math.random())),r=0;for(;r<50&&0!=e[t][o];)t=parseInt(Math.floor(4*Math.random())),o=parseInt(Math.floor(4*Math.random())),r++;if(50==r)for(let n=0;n<e.lenght;n++)for(let r=0;r<e[n].length;r++)0==e[n][r]&&(t=n,o=r);let l=Math.random()<.5?2:4;return e[t][o]=l,n.animate.showAnimated(t,o,l),e},generateNumcell(e){return this.randomOneNum(this.randomOneNum(e))}};e.exports=class{static get Num(){return r}}},function(e,t,o){const n=o(0);e.exports=class{constructor(){this.$wrapper=$(".matrix-wrapper"),this.wrapperWidth=this.$wrapper.width(),this.$wrapper.css("height",`${this.wrapperWidth}px`)}initUI(e){let t="";for(let e=0;e<4;e++)for(let o=0;o<4;o++)t+=`<div class="matrix-cell" style="left:${n.tool.getPosition(e,o).left}%;top:${n.tool.getPosition(e,o).top}%;height:${.2*this.wrapperWidth}px"></div>`;this.$wrapper.append(t),this.getNumCell(e)}getNumCell(e){$(".num-cell").remove();let t="";for(let o=0;o<e.length;o++)for(let r=0;r<e[o].length;r++)0==e[o][r]?t+=`<div class="num-cell" id="num-cell-${o}-${r}"; style="width:0px;height:0px;left:${n.tool.getPosition(o,r).left+10}%;top:${n.tool.getPosition(o,r).top+10}%;"></div>`:t+=`<div class="num-cell" id="num-cell-${o}-${r}"; style="color:${n.tool.getNumColor(e[o][r])};background-color:${n.tool.getBcolor(e[o][r])};width:${.2*this.wrapperWidth}px;height:${.2*this.wrapperWidth}px;left:${n.tool.getPosition(o,r).left}%;top:${n.tool.getPosition(o,r).top}%;">${e[o][r]}</div>`;this.$wrapper.append(t)}}},function(e,t,o){"use strict";o.r(t);o(9);const n=o(0),r=o(3),l=o(2),a=o(1);window.onload=(()=>{let e=n.tool.makeMartix(0),t=new r;t.initUI(e),e=l.Num.generateNumcell(e),$("#start").on("click",()=>{e=n.tool.makeMartix(0),t.initUI(e),e=l.Num.generateNumcell(e)}),$("#save").on("click",()=>{}),$(document).keydown(o=>{switch(o.keyCode){case 37:a.move.moveLeft(e),setTimeout(()=>{t.getNumCell(e)},200),l.Num.generateNumcell(e),console.log(0);break;case 38:e=a.move.moveUp(e),setTimeout(()=>{t.getNumCell(e)},200),l.Num.generateNumcell(e);break;case 39:e=a.move.moveRight(e),setTimeout(()=>{t.getNumCell(e)},200),l.Num.generateNumcell(e);break;case 40:e=a.move.moveDown(e),setTimeout(()=>{t.getNumCell(e)},200),l.Num.generateNumcell(e)}});let o=0,i=0,c=0,u=0,m=$(window).width();document.addEventListener("touchstart",e=>{o=e.touches[0].pageX,i=e.touches[0].pageY}),document.addEventListener("touchend",n=>{c=n.changedTouches[0].pageX,u=n.changedTouches[0].pageY;let r=c-o,s=u-i;Math.abs(r)<.3*m&&Math.abs(s)<.3*m||(Math.abs(r)>=Math.abs(s)?r>0?(e=a.move.moveRight(e),setTimeout(()=>{t.getNumCell(e)},200),l.Num.generateNumcell(e)):(e=a.move.moveLeft(e),setTimeout(()=>{t.getNumCell(e)},200),l.Num.generateNumcell(e)):s>0?(e=a.move.moveDown(e),setTimeout(()=>{t.getNumCell(e)},200),l.Num.generateNumcell(e)):(e=a.move.moveUp(e),setTimeout(()=>{t.getNumCell(e)},200),l.Num.generateNumcell(e)))})})},,,,,function(e,t){}]);